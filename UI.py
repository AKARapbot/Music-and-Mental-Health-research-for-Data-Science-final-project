import pandas as pd
import pickle
from sklearn.preprocessing import LabelEncoder
import tkinter as tk
from tkinter import ttk, messagebox
import webbrowser
import pgmpy
import pgmpy.models
import numpy._core
import numpy._core.multiarray

#input model_str in the MHmodel
# Load the model
model_str = '800495e5350000000000008c1c70676d70792e6d6f64656c732e426179657369616e4e6574776f726b948c0f426179657369616e4e6574776f726b9493942981947d94288c056772617068947d948c055f6e6f6465947d94288c07416e7869657479947d948c0f486967685f44657072657373696f6e947d948c0f496e737472756d656e74616c697374947d948c08436f6d706f736572947d948c154672657175656e6379205b436c6173736963616c5d947d948c134672657175656e6379205b436f756e7472795d947d948c104672657175656e6379205b466f6c6b5d947d948c104672657175656e6379205b526f636b5d947d948c134672657175656e6379205b48697020686f705d947d948c0f4672657175656e6379205b5261705d947d948c104672657175656e6379205b4c6f66695d947d948c0f4672657175656e6379205b45444d5d947d948c104672657175656e6379205b4a617a7a5d947d948c1c4672657175656e6379205b566964656f2067616d65206d757369635d947d948c114672657175656e6379205b4d6574616c5d947d948c094661762067656e7265947d948c0f4672657175656e6379205b506f705d947d948c114672657175656e6379205b4b20706f705d947d948c0f4672657175656e6379205b5226425d947d948c114672657175656e6379205b4c6174696e5d947d94758c045f61646a947d942868097d94680b7d948c06776569676874944e7373680b7d94680d7d9428680f7d9468354e738c07416e7869657479947d9468354e7375680f7d9468117d94680d7d9468354e737368137d9468157d9468354e737368157d9468177d9468354e737368177d942868257d9468354e73680b7d9468354e737568197d9428681b7d9468354e73681d7d9468354e73681f7d9468354e7375681b7d94680b7d9468354e7373681d7d9468237d9468354e7373681f7d9468217d9468117d9468354e737368237d9468257d9468277d9468354e737368277d9468297d94682b7d9468354e7373682b7d94682d7d942868197d9468354e7368297d9468354e73682f7d9468354e7368217d9468354e7375682f7d94758c055f737563639468328c055f70726564947d942868097d94680d683a73680b7d942868096834681b684a6817684475680d7d946811683d73680f7d94680d68387368117d946821684f7368137d9468157d946813683f7368177d94681568417368197d94682d685873681b7d946819684673681d7d946819684773681f7d94681968487368217d94682d685b7368237d94681d684c7368257d94681768437368277d94682568527368297d94682d685973682b7d946829685573682d7d94682f7d94682d685a73758c125f5f6e6574776f726b785f63616368655f5f947d948c0361646a948c1a6e6574776f726b782e636c61737365732e636f72657669657773948c0d41646a6163656e6379566965779493942981947d948c065f61746c617394683273628c056e6f646573948c1c6e6574776f726b782e636c61737365732e7265706f72747669657773948c084e6f6465566965779493942981947d948c065f6e6f64657394680873628c04707265649468792981947d94687c685f73628c04737563639468792981947d94687c683273628c076c6174656e7473948f948c05656467657394687e8c0b4f757445646765566965779493942981947d94288c065f67726170689468038c085f61646a6469637494683275628c0463706473945d94288c1a70676d70792e666163746f72732e64697363726574652e435044948c0a546162756c61724350449493942981947d94288c087661726961626c659468098c0d7661726961626c655f63617264944b0b8c097661726961626c6573945d94286809680d658c0b63617264696e616c697479948c156e756d70792e636f72652e6d756c74696172726179948c0c5f7265636f6e7374727563749493948c056e756d7079948c076e6461727261799493944b0085944301629487945294284b014b02859468a28c0564747970659493948c02693494898887945294284b038c013c944e4e4e4affffffff4affffffff4b007494628943080b00000002000000947494628c0676616c7565739468a168a44b00859468a687945294284b014b0b4b02869468ab8c02663894898887945294284b0368af4e4e4e4affffffff4affffffff4b007494628943b07c201fce3858ac3f6d393341b352a33f03e99864f1f7a53fb03489b6b49a963f7c201fce3858ac3f81d821270c58ab3fb18d678b36a6b93f0ea01ee8440abb3fb6c795d0638cb43fcb3b8886b2aeb13ff471a4d61276b63f9d76e00a7958b03f95e276fa3e03c03f6b2a6edfb7b6bd3f51fe39af6233c33f1ceffd597b8ac53f13542ba9b349c13f3e21c98a4438ca3ff78e3b7929e9b33fcb3b8886b2aeb13fb4aafe2d4d19b73f845027759807b73f947494628c0b73746174655f6e616d6573947d942868095d9428689f8c067363616c617294939468ab8c02693494898887945294284b0368af4e4e4e4affffffff4affffffff4b00749462430400000000948694529468c268c5430401000000948694529468c268c5430402000000948694529468c268c5430403000000948694529468c268c5430404000000948694529468c268c5430405000000948694529468c268c5430406000000948694529468c268c5430407000000948694529468c268c5430408000000948694529468c268c5430409000000948694529468c268c543040a000000948694529465680d5d942868c268c5430400000000948694529468c268c5430401000000948694529465758c0a6e616d655f746f5f6e6f947d942868097d942868c94b0068cc4b0168cf4b0268d24b0368d54b0468d84b0568db4b0668de4b0768e14b0868e44b0968e74b0a75680d7d942868eb4b0068ee4b0175758c0a6e6f5f746f5f6e616d65947d942868097d94284b0068c94b0168cc4b0268cf4b0368d24b0468d54b0568d84b0668db4b0768de4b0868e14b0968e44b0a68e775680d7d94284b0068eb4b0168ee7575756268972981947d9428689a680b689b4b02689c5d9428680b6809681b681765689e68a168a44b00859468a687945294284b014b04859468ae894310020000000b00000004000000040000009474946268b368a168a44b00859468a687945294284b01284b024b0b4b044b04749468ba8942000b000021b980d7dbe8ef3f354fa8058c498c3f21b980d7dbe8ef3f34442a08f36ed53f000000000000e03fc45ee9cfd98eef3f000000000000e03fb299c07393d9ef3f000000000000e03fc45ee9cfd98eef3f10a2c60fa2c6ef3f7ad5e61ab78be93f000000000000e03fc45ee9cfd98eef3fc45ee9cfd98eef3fc45ee9cfd98eef3fc45ee9cfd98eef3fc45ee9cfd98eef3fe6ddea7b8648e53f330f6d8cb2ecef3f000000000000e03fc45ee9cfd98eef3f000000000000e03fc45ee9cfd98eef3f000000000000e03fc45ee9cfd98eef3fc45ee9cfd98eef3fc45ee9cfd98eef3f354fa8058c498c3fc45ee9cfd98eef3f000000000000e03fc45ee9cfd98eef3f10a2c60fa2c6ef3f000000000000e03fb299c07393d9ef3fd3f14c5e922ee33f000000000000e03fc45ee9cfd98eef3fe402989f8ef1e73fb299c07393d9ef3f000000000000e03f10a2c60fa2c6ef3f34442a08f36ed53f10a2c60fa2c6ef3f10a2c60fa2c6ef3f10a2c60fa2c6ef3f000000000000e03fe6ddea7b8648e53fb299c07393d9ef3f10a2c60fa2c6ef3f9be57d6c84c3ec3fe402989f8ef1e73f000000000000e03f000000000000e03fb299c07393d9ef3f0ecc8e16c746e23fc605303f1de3ef3f220a9e5dcc9dea3f000000000000e03fe402989f8ef1e73fe6ddea7b8648e53f10a2c60fa2c6ef3fe6ddea7b8648e53fb299c07393d9ef3f000000000000e03f354fa8058c498c3f7ad5e61ab78be93f000000000000e03f000000000000e03fc45ee9cfd98eef3f000000000000e03f1105cf2ee64ee53fc45ee9cfd98eef3fc45ee9cfd98eef3f591c6643dba2d93f0ecc8e16c746e23f10a2c60fa2c6ef3f354fa8058c498c3fc45ee9cfd98eef3f000000000000e03f354fa8058c498c3f10a2c60fa2c6ef3f000000000000e03fe402989f8ef1e73f000000000000e03fb299c07393d9ef3fb299c07393d9ef3fddf561a23362d53f10a2c60fa2c6ef3f10a2c60fa2c6ef3fe402989f8ef1e73f000000000000e03fc45ee9cfd98eef3fc45ee9cfd98eef3f10a2c60fa2c6ef3f1df8ae1cf8ae7c3fc45ee9cfd98eef3fe6ddea7b8648e53f000000000000e03f000000000000e03f000000000000e03f7ad5e61ab78be93f1105cf2ee64ee53fa830cad5adc5e13f10a2c60fa2c6ef3f354fa8058c498c3fb19e6b54a474dc3ff7915e810951e53f000000000000e03f000000000000e03f15aa649423d1c93f6062ad2721f5eb3f10a2c60fa2c6ef3f10a2c60fa2c6ef3f34442a08f36ed53ffc2560cb924bd73fe6ddea7b8648e53f000000000000e03f000000000000e03f6062ad2721f5eb3fc45ee9cfd98eef3f000000000000e03f86726aaf17ffe13f8e690e911570db3fe402989f8ef1e73f39facfc0e21cd03fab37a7785557d23fab37a7785557d23fe402989f8ef1e73f10a2c60fa2c6ef3f038bdaab0541e73f651a82937b3cd33f000000000000e03fe726b31f4636733fa3f4c55fc85bd53f6d43058ec715c03f000000000000e03f1df8ae1cf8ae7c3fd47cc3757e0ed03fe60ed83c7278c23f354fa8058c498c3f354fa8058c498c3f39facfc0e21cd03fada8f986ebfc5c3f39facfc0e21cd03f000000000000e03f591c6643dba2d93fddf561a23362d53f354fa8058c498c3fc45ee9cfd98eef3f000000000000e03f2fd3109cdce3b93f354fa8058c498c3f354fa8058c498c3fe726b31f4636733f0b39facfc0e26c3f000000000000e03f354fa8058c498c3f000000000000e03fe726b31f4636733fe6ddea7b8648e53f354fa8058c498c3fc45ee9cfd98eef3f0ecc8e16c746e23f1df8ae1cf8ae7c3f1df8ae1cf8ae7c3fbbde467f2824673fd47cc3757e0ed03fc45ee9cfd98eef3f000000000000e03f0b39facfc0e26c3fada8f986ebfc5c3fe726b31f4636733f354fa8058c498c3f354fa8058c498c3f9accf092734d633fbbde467f2824673fc45ee9cfd98eef3fbbde467f2824673fe6ddea7b8648e53f000000000000e03f354fa8058c498c3f000000000000e03fe726b31f4636733f000000000000e03f354fa8058c498c3f1df8ae1cf8ae7c3f15aa649423d1c93f000000000000e03f354fa8058c498c3f354fa8058c498c3f354fa8058c498c3f354fa8058c498c3f354fa8058c498c3f34442a08f36ed53f9accf092734d633f000000000000e03f354fa8058c498c3f000000000000e03f354fa8058c498c3f000000000000e03f354fa8058c498c3f354fa8058c498c3f354fa8058c498c3fc45ee9cfd98eef3f354fa8058c498c3f000000000000e03f354fa8058c498c3f1df8ae1cf8ae7c3f000000000000e03fe726b31f4636733f591c6643dba2d93f000000000000e03f354fa8058c498c3f39facfc0e21cd03fe726b31f4636733f000000000000e03f1df8ae1cf8ae7c3fe6ddea7b8648e53f1df8ae1cf8ae7c3f1df8ae1cf8ae7c3f1df8ae1cf8ae7c3f000000000000e03f34442a08f36ed53fe726b31f4636733f1df8ae1cf8ae7c3f2fd3109cdce3b93f39facfc0e21cd03f000000000000e03f000000000000e03fe726b31f4636733fe367e2d27172db3f0b39facfc0e26c3f76d78789ce88c53f000000000000e03f39facfc0e21cd03f34442a08f36ed53f1df8ae1cf8ae7c3f34442a08f36ed53fe726b31f4636733f000000000000e03fc45ee9cfd98eef3f15aa649423d1c93f000000000000e03f000000000000e03f354fa8058c498c3f000000000000e03fddf561a23362d53f354fa8058c498c3f354fa8058c498c3fd3f14c5e922ee33fe367e2d27172db3f1df8ae1cf8ae7c3fc45ee9cfd98eef3f354fa8058c498c3f000000000000e03fc45ee9cfd98eef3f1df8ae1cf8ae7c3f000000000000e03f39facfc0e21cd03f000000000000e03fe726b31f4636733fe726b31f4636733f1105cf2ee64ee53f1df8ae1cf8ae7c3f1df8ae1cf8ae7c3f39facfc0e21cd03f000000000000e03f354fa8058c498c3f354fa8058c498c3f1df8ae1cf8ae7c3f10a2c60fa2c6ef3f354fa8058c498c3f34442a08f36ed53f000000000000e03f000000000000e03f000000000000e03f15aa649423d1c93fddf561a23362d53fb19e6b54a474dc3f1df8ae1cf8ae7c3fc45ee9cfd98eef3fa830cad5adc5e13f12dc42fdec5dd53f000000000000e03f000000000000e03f7ad5e61ab78be93f7c764a617b2bc03f1df8ae1cf8ae7c3f1df8ae1cf8ae7c3fe6ddea7b8648e53f02ed4f9a365ae43f34442a08f36ed53f000000000000e03f000000000000e03f7c764a617b2bc03f354fa8058c498c3f000000000000e03ff51a2ba1d001dc3f39cb7837f547e23f39facfc0e21cd03fe402989f8ef1e73f2a64ac4355d4e63f2a64ac4355d4e63f39facfc0e21cd03f1df8ae1cf8ae7c3ffae94aa8f47dd13fcdf23e36c261e63f000000000000e03fb299c07393d9ef3faf051dd01b52e53f25af7e1c8efaeb3f000000000000e03f10a2c60fa2c6ef3f96411ec5c0f8e73f46fcc970e361eb3fc45ee9cfd98eef3fc45ee9cfd98eef3fe402989f8ef1e73f2c833c8a81f1ef3fe402989f8ef1e73f000000000000e03fd3f14c5e922ee33f1105cf2ee64ee53fc45ee9cfd98eef3f354fa8058c498c3f000000000000e03f9be57d6c84c3ec3fc45ee9cfd98eef3fc45ee9cfd98eef3fb299c07393d9ef3fc605303f1de3ef3f000000000000e03fc45ee9cfd98eef3f000000000000e03fb299c07393d9ef3f34442a08f36ed53fc45ee9cfd98eef3f354fa8058c498c3fe367e2d27172db3f10a2c60fa2c6ef3f10a2c60fa2c6ef3f21b980d7dbe8ef3f96411ec5c0f8e73f354fa8058c498c3f000000000000e03fc605303f1de3ef3f2c833c8a81f1ef3fb299c07393d9ef3fc45ee9cfd98eef3fc45ee9cfd98eef3f330f6d8cb2ecef3f9474946268be7d9428680b5d942868c268c5430400000000948694529468c268c5430401000000948694529465680968c0681b5d942868c268c5430400000000948694529468c268c5430401000000948694529468c268c5430402000000948694529468c268c543040300000094869452946568175d942868c268c5430400000000948694529468c268c5430401000000948694529468c268c5430402000000948694529468c268c54304030000009486945294657568ef7d9428680b7d94286a0a0100004b006a0d0100004b017568097d942868c94b0068cc4b0168cf4b0268d24b0368d54b0468d84b0568db4b0668de4b0768e14b0868e44b0968e74b0a75681b7d94286a110100004b006a140100004b016a170100004b026a1a0100004b037568177d94286a1e0100004b006a210100004b016a240100004b026a270100004b03757568f37d9428680b7d94284b006a0a0100004b016a0d0100007568097d94284b0068c94b0168cc4b0268cf4b0368d24b0468d54b0568d84b0668db4b0768de4b0868e14b0968e44b0a68e775681b7d94284b006a110100004b016a140100004b026a170100004b036a1a0100007568177d94284b006a1e0100004b016a210100004b026a240100004b036a270100007575756268972981947d9428689a680d689b4b02689c5d9428680d681165689e68a168a44b00859468a687945294284b014b02859468ae89430802000000040000009474946268b368a168a44b00859468a687945294284b014b024b04869468ba894340fd8552c601fce83ffe47d87f84fde73f9dc6b8124ae2e43fbef7de7befbdd73f0be8b5e6f80fcc3f05704f00f704d03fc6728eda6b3bd63f218410420821e43f9474946268be7d9428680d68e868115d942868c268c5430400000000948694529468c268c5430401000000948694529468c268c5430402000000948694529468c268c54304030000009486945294657568ef7d9428680d7d942868eb4b0068ee4b017568117d94286a450100004b006a480100004b016a4b0100004b026a4e0100004b03757568f37d9428680d7d94284b0068eb4b0168ee7568117d94284b006a450100004b016a480100004b026a4b0100004b036a4e0100007575756268972981947d9428689a680f689b4b02689c5d9428680f680d65689e68a168a44b00859468a687945294284b014b02859468ae89430802000000020000009474946268b368a168a44b00859468a687945294284b014b024b02869468ba894320b4ae744601d4ed3ffbf7f3ed6417e33f5c8a5accf55fb13f0b10182436d1d93f9474946268be7d9428680f5d942868c268c5430400000000948694529468c268c5430401000000948694529465680d68e87568ef7d9428680f7d94286a680100004b006a6b0100004b0175680d7d942868eb4b0068ee4b01757568f37d9428680f7d94284b006a680100004b016a6b01000075680d7d94284b0068eb4b0168ee7575756268972981947d9428689a6811689b4b04689c5d94286811682165689e68a168a44b00859468a687945294284b014b02859468ae89430804000000040000009474946268b368a168a44b00859468a687945294284b014b044b04869468ba8943804ab2a07cbf7bda3f23eb72211fbac63f3a0417efa343c03f777c08526e2aaa3f4431981124bdd33f92db1526e940dc3f094ddccb8ed0d43f5c23abcbb057ca3f77da7f6c5e0ec73f000000000000d03fa5816cf94d1ad83f1f82949b8ae6d93fd9bc1ceeb4ffb83fb95d61920ec4c03f6a5e5786a2e6c53fa4dc54344fa8d53f9474946268be7d942868116a4201000068215d942868c268c5430400000000948694529468c268c5430401000000948694529468c268c5430402000000948694529468c268c54304030000009486945294657568ef7d942868117d94286a450100004b006a480100004b016a4b0100004b026a4e0100004b037568217d94286a850100004b006a880100004b016a8b0100004b026a8e0100004b03757568f37d942868117d94284b006a450100004b016a480100004b026a4b0100004b036a4e0100007568217d94284b006a850100004b016a880100004b026a8b0100004b036a8e0100007575756268972981947d9428689a6813689b4b04689c5d94681361689e68a168a44b00859468a687945294284b014b01859468ae894304040000009474946268b368a168a44b00859468a687945294284b014b04859468ba8943207ba4938a0f1cdf3fa3a61ee9a4e2d33f8ed65f82321bc13f6c26772cc9ceb13f9474946268be7d9468135d942868c268c5430400000000948694529468c268c5430401000000948694529468c268c5430402000000948694529468c268c54304030000009486945294657368ef7d9468137d94286aa80100004b006aab0100004b016aae0100004b026ab10100004b03757368f37d9468137d94284b006aa80100004b016aab0100004b026aae0100004b036ab10100007573756268972981947d9428689a6815689b4b04689c5d94286815681365689e68a168a44b00859468a687945294284b014b02859468ae89430804000000040000009474946268b368a168a44b00859468a687945294284b014b044b04869468ba8943808a13a88b0bcce13fdf3eab7313c8d03fbfa444074331cf3fcbf9b39c3fcbc93fc77e45473f63d13fe215e1782477d93fa1ad5d7c5e67d03f8d01d318308dd13f425580bea691c03fa8bd9e173cb3cc3fa61a4b5f52a2d33f1a03a631601ad33f1d7c5111b2dea53fac31911ea89cbd3fb3ca69415bbbc83fe6fc59ce9fe5cc3f9474946268be7d942868155d942868c268c5430400000000948694529468c268c5430401000000948694529468c268c5430402000000948694529468c268c543040300000094869452946568136aa50100007568ef7d942868157d94286ac90100004b006acc0100004b016acf0100004b026ad20100004b037568137d94286aa80100004b006aab0100004b016aae0100004b026ab10100004b03757568f37d942868157d94284b006ac90100004b016acc0100004b026acf0100004b036ad20100007568137d94284b006aa80100004b016aab0100004b026aae0100004b036ab10100007575756268972981947d9428689a6817689b4b04689c5d94286817681565689e68a168a44b00859468a687945294284b014b02859468ae89430804000000040000009474946268b368a168a44b00859468a687945294284b014b044b04869468ba8943807cc5577cc557cc3f584906c6ddc9b63f93d38ff1816e9d3f049ca28c8053a43fce883723de8cc83fc36fc02d2195b93f93d38ff1816e9d3ff7c7bae6fe58b73f6d1f4c17caf6d13fa715aa6d7e8ed83f9a92d8628646d53fc9610f2239ecd13f6e39ec18e496d33f123c64d5c159db3f7ab97aafd485e33f5ccc56898bd9e23f9474946268be7d942868176a1b01000068156ac60100007568ef7d942868177d94286a1e0100004b006a210100004b016a240100004b026a270100004b037568157d94286ac90100004b006acc0100004b016acf0100004b026ad20100004b03757568f37d942868177d94284b006a1e0100004b016a210100004b026a240100004b036a270100007568157d94284b006ac90100004b016acc0100004b026acf0100004b036ad20100007575756268972981947d9428689a6819689b4b04689c5d94286819682d65689e68a168a44b00859468a687945294284b014b02859468ae89430804000000040000009474946268b368a168a44b00859468a687945294284b014b044b04869468ba894380d4b8c325989dde3f952753dba4bace3f51355bfd4d83be3f0e87c3e170388c3fd96b971fe9fed23fef2f7c2a4b71d83f986ec135ce3cce3f27be896fe29bc83f17013d584debc83f09a7342ffe44d23f6d6877bd2a93da3f97a02568095ad23f7bac65e880dd9e3ff85496e290b1b73fe525a250355bcd3f0fb283ec203be03f9474946268be7d942868195d942868c268c5430400000000948694529468c268c5430401000000948694529468c268c5430402000000948694529468c268c5430403000000948694529465682d5d942868c268c5430400000000948694529468c268c5430401000000948694529468c268c5430402000000948694529468c268c54304030000009486945294657568ef7d942868197d94286a020200004b006a050200004b016a080200004b026a0b0200004b0375682d7d94286a0f0200004b006a120200004b016a150200004b026a180200004b03757568f37d942868197d94284b006a020200004b016a050200004b026a080200004b036a0b02000075682d7d94284b006a0f0200004b016a120200004b026a150200004b036a180200007575756268972981947d9428689a681b689b4b04689c5d9428681b681965689e68a168a44b00859468a687945294284b014b02859468ae89430804000000040000009474946268b368a168a44b00859468a687945294284b014b044b04869468ba8943800bae71e6f19fe93f95ce14489e36cd3f45d562d66fc3a23f371315f64fcb683f2b064a78a3a9c33fab74a640f2b4e13f95ce14489e36cd3fdc01e1597b4daf3fbbeb55995440a63f24a0a15d44c8c53f474043bb8890e33fe00e08cfda6bca3f0bae71e6f19f613f6dfabe5e51b5a83ff8f58aaac5acbf3f17d7a9466657e73f9474946268be7d9428681b6a0e01000068196aff0100007568ef7d9428681b7d94286a110100004b006a140100004b016a170100004b026a1a0100004b037568197d94286a020200004b006a050200004b016a080200004b026a0b0200004b03757568f37d9428681b7d94284b006a110100004b016a140100004b026a170100004b036a1a0100007568197d94284b006a020200004b016a050200004b026a080200004b036a0b0200007575756268972981947d9428689a681d689b4b04689c5d9428681d681965689e68a168a44b00859468a687945294284b014b02859468ae89430804000000040000009474946268b368a168a44b00859468a687945294284b014b044b04869468ba894380c70c0730f703e33fbc957d0ea909d63f171172dd6c4bd53f3db6226838a9cb3fb4481fe598e1d03f7b45d562d66fd33f7b45d562d66fd33f90f87b9812cad23f1a819f9eb839b93f8cb7b2cf2135d13fb8b2cf2135c1c83f85fdd33206eed03fbbeb55995440a63ff2b4e9fb7a45b53f24a0a15d44c8c53f995d3d0196e6cc3f9474946268be7d9428681d5d942868c268c5430400000000948694529468c268c5430401000000948694529468c268c5430402000000948694529468c268c543040300000094869452946568196aff0100007568ef7d9428681d7d94286a480200004b006a4b0200004b016a4e0200004b026a510200004b037568197d94286a020200004b006a050200004b016a080200004b026a0b0200004b03757568f37d9428681d7d94284b006a480200004b016a4b0200004b026a4e0200004b036a510200007568197d94284b006a020200004b016a050200004b026a080200004b036a0b0200007575756268972981947d9428689a681f689b4b04689c5d9428681f681965689e68a168a44b00859468a687945294284b014b02859468ae89430804000000040000009474946268b368a168a44b00859468a687945294284b014b044b04869468ba8943805c708d338fffe43fed73484d30deda3f6ad3f7f58aaad53ff504589af323ce3fdf4e695d3c8bc43f95702186c717d03fcd075b7bf4ced33f53425930da20d73f8212de68eafcba3f95ce14489e36cd3f132ec4f0f802c83f335161ffb48cd13fe3cce33f23f0b33fd0d02e22e4bab93f7f1b962c080ac53ffed33206ee80c03f9474946268be7d9428681f5d942868c268c5430400000000948694529468c268c5430401000000948694529468c268c5430402000000948694529468c268c543040300000094869452946568196aff0100007568ef7d9428681f7d94286a6b0200004b006a6e0200004b016a710200004b026a740200004b037568197d94286a020200004b006a050200004b016a080200004b026a0b0200004b03757568f37d9428681f7d94284b006a6b0200004b016a6e0200004b026a710200004b036a740200007568197d94284b006a020200004b016a050200004b026a080200004b036a0b0200007575756268972981947d9428689a6821689b4b04689c5d94286821682d65689e68a168a44b00859468a687945294284b014b02859468ae89430804000000040000009474946268b368a168a44b00859468a687945294284b014b044b04869468ba89438079b4cfc462f0e23f10932b88c915d43f5aa48f72cc70d03f293fca8ff2a3cc3fd96b971fe9fed23f4fa6b64975fdd63f836b9c79fc67d43f43a15028140ad53f98de5bc36625b93fd27fa0c61d2ed13f836b9c79fc67d43f412010080402d13f057246bef4de8a3f7836ea3b1bf5ad3f8212de68eafcba3fd13d740fdd43c73f9474946268be7d942868216a82010000682d6a0c0200007568ef7d942868217d94286a850100004b006a880100004b016a8b0100004b026a8e0100004b0375682d7d94286a0f0200004b006a120200004b016a150200004b026a180200004b03757568f37d942868217d94284b006a850100004b016a880100004b026a8b0100004b036a8e01000075682d7d94284b006a0f0200004b016a120200004b026a150200004b036a180200007575756268972981947d9428689a6823689b4b04689c5d94286823681d65689e68a168a44b00859468a687945294284b014b02859468ae89430804000000040000009474946268b368a168a44b00859468a687945294284b014b044b04869468ba89438064d338d81b86e03f740bfde7dc42cf3ffd8df7cf3ed5cc3f3bb9bc083e05c23f072e46b51abacd3fd7af14a8f52bd53ffd8df7cf3ed5cc3f279717c1a740ce3f9c2cc727e479c73fa5dd08486937d23f070a69c5c263d73f000000000000d03f97af1e842367b13f95d9c73765f6c13ff8cf3ed5fc8dc73fcfd7151b0dddd73f9474946268be7d942868235d942868c268c5430400000000948694529468c268c5430401000000948694529468c268c5430402000000948694529468c268c5430403000000948694529465681d6a450200007568ef7d942868237d94286aa40200004b006aa70200004b016aaa0200004b026aad0200004b0375681d7d94286a480200004b006a4b0200004b016a4e0200004b026a510200004b03757568f37d942868237d94284b006aa40200004b016aa70200004b026aaa0200004b036aad02000075681d7d94284b006a480200004b016a4b0200004b026a4e0200004b036a510200007575756268972981947d9428689a6825689b4b04689c5d94286825681765689e68a168a44b00859468a687945294284b014b02859468ae89430804000000040000009474946268b368a168a44b00859468a687945294284b014b044b04869468ba89438062dece9098b7eb3fb6d3f10f2e4ce23f8731dc8631dcd63f7445075f2937c43f52b901cea9c3b53f102e4c6a88a6d43f852fda842fdad43f15c75e7ea8e0d03f01e7d4e16ae49f3fd3d2d2d2d2d2b23ff49e49f49e49c43f5218cb0e69e1d13f6f6748ccdb19923f81aedb083663a03ff49e49f49e49c43fde7d52c35922d33f9474946268be7d942868255d942868c268c5430400000000948694529468c268c5430401000000948694529468c268c5430402000000948694529468c268c543040300000094869452946568176a1b0100007568ef7d942868257d94286ac70200004b006aca0200004b016acd0200004b026ad00200004b037568177d94286a1e0100004b006a210100004b016a240100004b026a270100004b03757568f37d942868257d94284b006ac70200004b016aca0200004b026acd0200004b036ad00200007568177d94284b006a1e0100004b016a210100004b026a240100004b036a270100007575756268972981947d9428689a6827689b4b10689c5d94286827682565689e68a168a44b00859468a687945294284b014b02859468ae89430810000000040000009474946268b368a168a44b00859468a687945294284b014b104b04869468ba8942000200006c9d59f47e2fb93ffdd22ffdd22fad3f9b183efed6edb23fce05a6f24e38473fed6d10f18115a83f15bc9c829753a03fad154f35317cac3fce05a6f24e38473fed6d10f18115a83ffdd22ffdd22fad3fb9d172ccf795b03fd3344dd3344d933f7d8edb09f74da33f8947e63fb5c1a63fad154f35317cac3f0265e24af706843f185e4d45d80c9d3fa2dc37594a13403fd5c4f0f1b76e473fce05a6f24e38473ffcbd240df467b43f16128fcc7f6ab33fc0d81615ecd99c3f0265e24af706843f379fe376c27d933fb6ecef4711399a3fe987b8d172cca73f0265e24af706843f444e8a992e04b23f4261a68af3ca933f5e43790de535843f0265e24af706843facc0f35059dd833fa2dc37594a13403f5e43790de535843fce05a6f24e38473f8d7f5d1f6f6c8d3f9babb99aabb98a3fd5c4f0f1b76e473fd3344dd3344d933f335d0884b6e5373fa2dc37594a13403fe987b8d172cca73f4b6e5202dc2de33f8bb019baf91ccf3fad657f3f8ac8c93f7d5f0930b645b53fbc9c829753f0a23fd8f5f1c6d699b53ffdd22ffdd22fad3fd5c4f0f1b76e473f0265e24af706843f7d8edb09f74da33f8947e63fb5c1a63fc0d81615ecd99c3fce05a6f24e38473f0145c12127c5bc3f4b3e09dd6252d33ffc4a80b12d2adc3f92adfd23d246ce3f444e8a992e04b23f39af3c5df8ceb13fad154f35317cac3fbc9c829753f0a23f9474946268be7d942868275d942868c268c5430400000000948694529468c268c5430401000000948694529468c268c5430402000000948694529468c268c5430403000000948694529468c268c5430404000000948694529468c268c5430405000000948694529468c268c5430406000000948694529468c268c5430407000000948694529468c268c5430408000000948694529468c268c5430409000000948694529468c268c543040a000000948694529468c268c543040b000000948694529468c268c543040c000000948694529468c268c543040d000000948694529468c268c543040e000000948694529468c268c543040f00000094869452946568256ac40200007568ef7d942868277d94286aea0200004b006aed0200004b016af00200004b026af30200004b036af60200004b046af90200004b056afc0200004b066aff0200004b076a020300004b086a050300004b096a080300004b0a6a0b0300004b0b6a0e0300004b0c6a110300004b0d6a140300004b0e6a170300004b0f7568257d94286ac70200004b006aca0200004b016acd0200004b026ad00200004b03757568f37d942868277d94284b006aea0200004b016aed0200004b026af00200004b036af30200004b046af60200004b056af90200004b066afc0200004b076aff0200004b086a020300004b096a050300004b0a6a080300004b0b6a0b0300004b0c6a0e0300004b0d6a110300004b0e6a140300004b0f6a170300007568257d94284b006ac70200004b016aca0200004b026acd0200004b036ad00200007575756268972981947d9428689a6829689b4b04689c5d94286829682d65689e68a168a44b00859468a687945294284b014b02859468ae89430804000000040000009474946268b368a168a44b00859468a687945294284b014b044b04869468ba894380e7c59f4838a5c93f7de9bd356c56a23fecc8d804f1b9a23fb806ae816be06a3fa14403b708e8d13f25d92a0ae48ccc3fc4740bae71e6c13f74e41c3947cea13fa830fa0fd4b8d33f265710932b88d93fc70c0730f703db3f18e14578115ed43f864f65290e19cb3f187f22e194e6d53fba1f58d891b1d93f2693c9643299e43f9474946268be7d942868295d942868c268c5430400000000948694529468c268c5430401000000948694529468c268c5430402000000948694529468c268c5430403000000948694529465682d6a0c0200007568ef7d942868297d94286a310300004b006a340300004b016a370300004b026a3a0300004b0375682d7d94286a0f0200004b006a120200004b016a150200004b026a180200004b03757568f37d942868297d94284b006a310300004b016a340300004b026a370300004b036a3a03000075682d7d94284b006a0f0200004b016a120200004b026a150200004b036a180200007575756268972981947d9428689a682b689b4b04689c5d9428682b682965689e68a168a44b00859468a687945294284b014b02859468ae89430804000000040000009474946268b368a168a44b00859468a687945294284b014b044b04869468ba8943807f4afd29f5a7ec3f375f99b30576e93fff8382a70a5ce13f1d46aae69dc8db3f271f9d7c74f2b13f375f99b30576c13f93ce0689d1bcd23ff474f7586a4bd03f70b1c1c506177b3f97b73e12e0379e3f06cb9210c8dcb63f44129a510fdcc13f1cc7711cc7719c3fe233e5ee9daba33fb6da3d8f9c4fb33f9b77222fe0fbc53f9474946268be7d9428682b5d942868c268c5430400000000948694529468c268c5430401000000948694529468c268c5430402000000948694529468c268c543040300000094869452946568296a2e0300007568ef7d9428682b7d94286a540300004b006a570300004b016a5a0300004b026a5d0300004b037568297d94286a310300004b006a340300004b016a370300004b026a3a0300004b03757568f37d9428682b7d94284b006a540300004b016a570300004b026a5a0300004b036a5d0300007568297d94284b006a310300004b016a340300004b026a370300004b036a3a0300007575756268972981947d9428689a682d689b4b04689c5d94682d61689e68a168a44b00859468a687945294284b014b01859468ae894304040000009474946268b368a168a44b00859468a687945294284b014b04859468ba8943207fba50b59c05d33f7fba50b59c05d33fe58e25d9395acf3f20879751538fc43f9474946268be7d94682d6a0c0200007368ef7d94682d7d94286a0f0200004b006a120200004b016a150200004b026a180200004b03757368f37d94682d7d94284b006a0f0200004b016a120200004b026a150200004b036a180200007573756268972981947d9428689a682f689b4b04689c5d9428682f682d65689e68a168a44b00859468a687945294284b014b02859468ae89430804000000040000009474946268b368a168a44b00859468a687945294284b014b044b04869468ba894380013d584deb78eb3fa9ef6cd47736e23f2f9e45fa28c7dc3f1ce3c6b8316edc3f59cbd001bb3db63f10932b88c915d43f836b9c79fc67d43f253d494fd293c43fbbfc48f7173ea53f98de5bc36625b93fdf4e695d3c8bc43fd53ff54ffd53cf3f057246bef4de8a3f805f39e2d13e933f7c3ba575f12cb23fcfbc33efcc3bc33f9474946268be7d9428682f5d942868c268c5430400000000948694529468c268c5430401000000948694529468c268c5430402000000948694529468c268c5430403000000948694529465682d6a0c0200007568ef7d9428682f7d94286a8b0300004b006a8e0300004b016a910300004b026a940300004b0375682d7d94286a0f0200004b006a120200004b016a150200004b026a180200004b03757568f37d9428682f7d94284b006a8b0300004b016a8e0300004b026a910300004b036a9403000075682d7d94284b006a0f0200004b016a120200004b026a150200004b036a1802000075757562658c0d63617264696e616c6974696573948c0b636f6c6c656374696f6e73948c0b64656661756c74646963749493948c086275696c74696e73948c03696e749493948594529475622e'
model = pickle.loads(bytes.fromhex(model_str))

label_encoder = LabelEncoder()
dummy_data = pd.DataFrame({
    'Fav genre': [
        'Classical', 'Country', 'EDM', 'Folk', 'Hip hop', 'Jazz', 'K pop',
        'Latin', 'Lofi', 'Metal', 'Pop', 'R&B', 'Rap', 'Rock', 'Video game music'
    ]
})
label_encoder.fit(dummy_data['Fav genre'])
fav_genre_encoder = label_encoder

frequency_columns = [
    'Frequency [Classical]', 'Frequency [Country]', 'Frequency [EDM]', 'Frequency [Folk]',
    'Frequency [Hip hop]', 'Frequency [Jazz]', 'Frequency [K pop]', 'Frequency [Latin]',
    'Frequency [Lofi]', 'Frequency [Metal]', 'Frequency [Pop]', 'Frequency [R&B]',
    'Frequency [Rap]', 'Frequency [Rock]', 'Frequency [Video game music]'
]

# GUI
class DepressionTestApp(tk.Tk):
    def __init__(self):
        super().__init__()

        self.title("Depression Test")

        container = tk.Frame(self)
        container.pack(fill="both", expand=True)

        self.frames = {}

        self.user_data = {}

        for F in [AnxietyPage, GenrePage, InstrumentalistPage, ComposerPage] + [self.create_frequency_page(i) for i in range(len(frequency_columns))] + [ResultPage, ResearchConsentPage]:
            page_name = F.__name__
            frame = F(parent=container, controller=self)
            self.frames[page_name] = frame
            frame.grid(row=0, column=0, sticky="nsew")

        self.show_frame("AnxietyPage")

    def show_frame(self, page_name):
        frame = self.frames[page_name]
        frame.tkraise()

    def get_user_data(self):
        return self.user_data

    def create_frequency_page(self, index):
        class FrequencyPage(tk.Frame):
            def __init__(self, parent, controller):
                super().__init__(parent)
                self.controller = controller
                self.index = index
                col = frequency_columns[index]
                tk.Label(self, text=f"How often do you listen to {col.split('[')[1].split(']')[0]} music?").pack(pady=10)
                self.frequency_combobox = ttk.Combobox(self, values=["Never", "Rarely", "Sometimes", "Very frequent"])
                self.frequency_combobox.pack(pady=10)
                next_button = tk.Button(self, text="Next", command=self.next_page)
                next_button.pack(pady=10)

            def next_page(self):
                frequency = self.frequency_combobox.get()
                if frequency in ["Never", "Rarely", "Sometimes", "Very frequent"]:
                    self.controller.user_data[frequency_columns[self.index]] = ["Never", "Rarely", "Sometimes", "Very frequent"].index(frequency)
                    next_index = self.index + 1
                    if next_index < len(frequency_columns):
                        self.controller.show_frame(f"FrequencyPage{next_index}")
                    else:
                        self.controller.show_frame("ResultPage")
                        self.controller.frames["ResultPage"].show_result()
                else:
                    messagebox.showerror("Invalid input", "Please select a valid frequency")

        FrequencyPage.__name__ = f"FrequencyPage{index}"
        return FrequencyPage


class AnxietyPage(tk.Frame):
    def __init__(self, parent, controller):
        super().__init__(parent)
        self.controller = controller
        tk.Label(self, text="From 0-10, what’s your Anxiety level?").pack(pady=10)
        self.anxiety_entry = tk.Entry(self)
        self.anxiety_entry.pack(pady=10)
        next_button = tk.Button(self, text="Next", command=self.next_page)
        next_button.pack(pady=10)

    def next_page(self):
        anxiety_level = self.anxiety_entry.get()
        if anxiety_level.isdigit() and 0 <= int(anxiety_level) <= 10:
            self.controller.user_data['Anxiety'] = int(anxiety_level)
            self.controller.show_frame("GenrePage")
        else:
            messagebox.showerror("Invalid input", "Please enter a valid anxiety level between 0 and 10")


class GenrePage(tk.Frame):
    def __init__(self, parent, controller):
        super().__init__(parent)
        self.controller = controller
        tk.Label(self, text="Please choose your favourite music genre").pack(pady=10)
        self.genre_combobox = ttk.Combobox(self, values=[
            'Classical', 'Country', 'EDM', 'Folk', 'Hip hop', 'Jazz', 'K pop',
            'Latin', 'Lofi', 'Metal', 'Pop', 'R&B', 'Rap', 'Rock', 'Video game music'
        ])
        self.genre_combobox.pack(pady=10)
        next_button = tk.Button(self, text="Next", command=self.next_page)
        next_button.pack(pady=10)

    def next_page(self):
        fav_genre = self.genre_combobox.get()
        if fav_genre in fav_genre_encoder.classes_:
            self.controller.user_data['Fav genre'] = fav_genre_encoder.transform([fav_genre])[0]
            self.controller.show_frame("InstrumentalistPage")
        else:
            messagebox.showerror("Invalid input", "Please choose a valid music genre")


class InstrumentalistPage(tk.Frame):
    def __init__(self, parent, controller):
        super().__init__(parent)
        self.controller = controller
        tk.Label(self, text="Are you an instrumentalist?").pack(pady=10)
        self.instrumentalist_combobox = ttk.Combobox(self, values=["Yes", "No"])
        self.instrumentalist_combobox.pack(pady=10)
        next_button = tk.Button(self, text="Next", command=self.next_page)
        next_button.pack(pady=10)

    def next_page(self):
        instrumentalist = self.instrumentalist_combobox.get()
        if instrumentalist in ["Yes", "No"]:
            self.controller.user_data['Instrumentalist'] = ["No", "Yes"].index(instrumentalist)
            self.controller.show_frame("ComposerPage")
        else:
            messagebox.showerror("Invalid input", "Please select 'Yes' or 'No'")


class ComposerPage(tk.Frame):
    def __init__(self, parent, controller):
        super().__init__(parent)
        self.controller = controller
        tk.Label(self, text="Do you compose music sometimes?").pack(pady=10)
        self.composer_combobox = ttk.Combobox(self, values=["Yes", "No"])
        self.composer_combobox.pack(pady=10)
        next_button = tk.Button(self, text="Next", command=self.next_page)
        next_button.pack(pady=10)

    def next_page(self):
        composer = self.composer_combobox.get()
        if composer in ["Yes", "No"]:
            self.controller.user_data['Composer'] = ["No", "Yes"].index(composer)
            self.controller.show_frame("FrequencyPage0")
        else:
            messagebox.showerror("Invalid input", "Please select 'Yes' or 'No'")


class ResultPage(tk.Frame):
    def __init__(self, parent, controller):
        super().__init__(parent)
        self.controller = controller
        self.result_label = tk.Label(self, text="")
        self.result_label.pack(pady=10)
        self.next_button = tk.Button(self, text="Next", command=self.go_to_research_page)
        self.next_button.pack(pady=10)
        self.result = None

    def show_result(self):
        user_data = self.controller.get_user_data()
        user_input = pd.DataFrame([user_data])
        prediction = model.predict(user_input)
        self.result = prediction['High_Depression'][0]

        if self.result == 1:
            self.result_label.config(text="You may have some tendencies toward depression; please seek professional psychological diagnosis promptly.")
            webbrowser.open("https://www.mind.org.uk/information-support/local-minds/")
        else:
            self.result_label.config(text="Life is beautiful, keep smiling! (●'◡'●)")

    def go_to_research_page(self):
        self.controller.show_frame("ResearchConsentPage")


class ResearchConsentPage(tk.Frame):
    def __init__(self, parent, controller):
        super().__init__(parent)
        self.controller = controller
        tk.Label(self, text="Are you willing to help us conduct further research to improve this program?").pack(pady=10)

        yes_button = tk.Button(self, text="Yes", command=self.agree)
        yes_button.pack(pady=10)

        no_button = tk.Button(self, text="No", command=self.decline)
        no_button.pack(pady=10)

    def agree(self):
        webbrowser.open("https://docs.google.com")
        self.controller.destroy()

    def decline(self):
        self.controller.destroy()


if __name__ == "__main__":
    app = DepressionTestApp()
    app.mainloop()